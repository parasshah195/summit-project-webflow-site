"use strict";(()=>{var y=Object.defineProperty;var m=(t,e,s)=>e in t?y(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var o=(t,e,s)=>(m(t,typeof e!="symbol"?e+"":e,s),s);var a=class{constructor(){o(this,"API_BASE","https://applerouth.onecanoe.com/api/public/v2");o(this,"API_ENDPOINT")}async sendQuery(){let e=await fetch(this.API_BASE+this.API_ENDPOINT,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.API_BODY)});return e.ok?await e.json():(console.warn(`Error when sending query: ${this.API_BASE}${this.API_ENDPOINT}`),console.warn(e,e.statusText),null)}},p=a;var r=class extends p{constructor(s){super();o(this,"API_ENDPOINT","/events");o(this,"API_BODY");o(this,"DEFAULT_EVENT_LIMIT",12);this.API_BODY=s,this.setAPIDefaults()}setAPIDefaults(){this.API_BODY.limit||(this.API_BODY.limit=this.DEFAULT_EVENT_LIMIT),this.API_BODY.start||(this.API_BODY.start=0)}async getQueryData(){let s=await this.sendQuery();if(!s)return null;let{data:n}=s;return!n||!n.length?(console.warn(`Empty response from the query: ${this.API_BASE}${this.API_ENDPOINT}`),this.emptyResponse()):n}emptyResponse(){return[]}},i=r;window.addEventListener("alpine:init",()=>{window.Alpine.data("eventCodeFind",function(){return{isError:!1,isLoading:!1,eventCode:"",async processQuery(){let t={category:["all"],event_code:this.eventCode};this.isLoading=!0;let e=await new i(t).getQueryData();if(!e.length){this.isLoading=!1,this.isError=!0,this.$refs.eventCodeErrorIXTrigger.click(),setTimeout(()=>{this.isError=!1,this.eventCode="",this.$refs.eventCodeInput.focus()},1e3);return}window.location.href=e[0].event_page_url}}})});})();
