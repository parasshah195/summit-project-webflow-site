"use strict";(()=>{var R=Object.defineProperty;var H=(d,i,e)=>i in d?R(d,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):d[i]=e;var h=(d,i,e)=>(H(d,typeof i!="symbol"?i+"":i,e),e);var u=class extends Date{constructor(e=null,t="YYYY-MM-DD",s="en-US"){super(u.parseDateTime(e,t,s));h(this,"lang");this.lang=s}static parseDateTime(e,t="YYYY-MM-DD",s="en-US"){if(!e)return new Date(new Date().setHours(0,0,0,0));if(e instanceof u)return e.toJSDate();if(e instanceof Date)return e;if(/^-?\d{10,}$/.test(String(e)))return new Date(Number(e));if(typeof e=="string"){let n=[],a=null;for(;(a=u.regex.exec(t))!=null;)a[1]!=="\\"&&n.push(a);if(n.length){let o={year:null,month:null,shortMonth:null,longMonth:null,day:null,hour:0,minute:0,second:0,ampm:null,value:""};n[0].index>0&&(o.value+=".*?");for(let[l,p]of Object.entries(n)){let m=Number(l),{group:b,pattern:f}=u.formatPatterns(p[0],s);o[b]=m+1,o.value+=f,o.value+=".*?"}let r=new RegExp(`^${o.value}$`);if(r.test(e)){let l=r.exec(e),p=Number(l[o.year]),m=null;o.month?m=Number(l[o.month])-1:o.shortMonth?m=u.shortMonths(s).indexOf(l[o.shortMonth]):o.longMonth&&(m=u.longMonths(s).indexOf(l[o.longMonth]));let b=Number(l[o.day])||1,f=Number(l[o.hour]),D=Number.isNaN(f)?0:f,C=Number(l[o.minute]),x=Number.isNaN(C)?0:C,P=Number(l[o.second]),N=Number.isNaN(P)?0:P,T=l[o.ampm];return T&&T==="PM"&&(D+=12,D===24&&(D=0)),new Date(p,m,b,D,x,N,0)}}}return new Date(new Date().setHours(0,0,0,0))}static shortMonths(e){return u.MONTH_JS.map(t=>new Date(2019,t).toLocaleString(e,{month:"short"}))}static longMonths(e){return u.MONTH_JS.map(t=>new Date(2019,t).toLocaleString(e,{month:"long"}))}static formatPatterns(e,t){switch(e){case"YY":case"YYYY":return{group:"year",pattern:`(\\d{${e.length}})`};case"M":return{group:"month",pattern:"(\\d{1,2})"};case"MM":return{group:"month",pattern:"(\\d{2})"};case"MMM":return{group:"shortMonth",pattern:`(${u.shortMonths(t).join("|")})`};case"MMMM":return{group:"longMonth",pattern:`(${u.longMonths(t).join("|")})`};case"D":return{group:"day",pattern:"(\\d{1,2})"};case"DD":return{group:"day",pattern:"(\\d{2})"};case"h":case"H":return{group:"hour",pattern:"(\\d{1,2})"};case"hh":case"HH":return{group:"hour",pattern:"(\\d{2})"};case"m":return{group:"minute",pattern:"(\\d{1,2})"};case"mm":return{group:"minute",pattern:"(\\d{2})"};case"s":return{group:"second",pattern:"(\\d{1,2})"};case"ss":return{group:"second",pattern:"(\\d{2})"};case"a":case"A":return{group:"ampm",pattern:"(AM|PM|am|pm)"}}}getWeek(e){let t=new Date(this.midnight_ts(this)),s=(this.getDay()+(7-e))%7;t.setDate(t.getDate()-s);let n=t.getTime();return t.setMonth(0,1),t.getDay()!==e&&t.setMonth(0,1+(4-t.getDay()+7)%7),1+Math.ceil((n-t.getTime())/6048e5)}clone(){return new u(this)}toJSDate(){return new Date(this)}inArray(e,t="[]"){return e.some(s=>s instanceof Array?this.isBetween(s[0],s[1],t):this.isSame(s,"day"))}isBetween(e,t,s="()"){switch(s){default:case"()":return this.midnight_ts(this)>this.midnight_ts(e)&&this.midnight_ts(this)<this.midnight_ts(t);case"[)":return this.midnight_ts(this)>=this.midnight_ts(e)&&this.midnight_ts(this)<this.midnight_ts(t);case"(]":return this.midnight_ts(this)>this.midnight_ts(e)&&this.midnight_ts(this)<=this.midnight_ts(t);case"[]":return this.midnight_ts()>=this.midnight_ts(e)&&this.midnight_ts()<=this.midnight_ts(t)}}isBefore(e,t="days"){switch(t){case"day":case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()>new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(e.getFullYear(),e.getMonth(),1).getTime()>new Date(this.getFullYear(),this.getMonth(),1).getTime();case"year":case"years":return e.getFullYear()>this.getFullYear()}throw new Error("isBefore: Invalid unit!")}isSameOrBefore(e,t="days"){switch(t){case"day":case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()>=new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(e.getFullYear(),e.getMonth(),1).getTime()>=new Date(this.getFullYear(),this.getMonth(),1).getTime()}throw new Error("isSameOrBefore: Invalid unit!")}isAfter(e,t="days"){switch(t){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>new Date(e.getFullYear(),e.getMonth(),1).getTime();case"year":case"years":return this.getFullYear()>e.getFullYear()}throw new Error("isAfter: Invalid unit!")}isSameOrAfter(e,t="days"){switch(t){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>=new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>=new Date(e.getFullYear(),e.getMonth(),1).getTime()}throw new Error("isSameOrAfter: Invalid unit!")}isSame(e,t="days"){switch(t){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()===new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()===new Date(e.getFullYear(),e.getMonth(),1).getTime()}throw new Error("isSame: Invalid unit!")}add(e,t="days"){switch(t){case"day":case"days":this.setDate(this.getDate()+e);break;case"month":case"months":this.setMonth(this.getMonth()+e)}return this}subtract(e,t="days"){switch(t){case"day":case"days":this.setDate(this.getDate()-e);break;case"month":case"months":this.setMonth(this.getMonth()-e)}return this}diff(e,t="days"){switch(t){default:case"day":case"days":return Math.round((this.midnight_ts()-this.midnight_ts(e))/864e5);case"month":case"months":let s=12*(e.getFullYear()-this.getFullYear());return s-=e.getMonth(),s+=this.getMonth(),s}}format(e,t="en-US"){let s="",n=[],a=null;for(;(a=u.regex.exec(e))!=null;)a[1]!=="\\"&&n.push(a);if(n.length){n[0].index>0&&(s+=e.substring(0,n[0].index));for(let[o,r]of Object.entries(n)){let l=Number(o);s+=this.formatTokens(r[0],t),n[l+1]&&(s+=e.substring(r.index+r[0].length,n[l+1].index)),l===n.length-1&&(s+=e.substring(r.index+r[0].length))}}return s.replace(/\\/g,"")}midnight_ts(e){return e?new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime():new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0).getTime()}formatTokens(e,t){switch(e){case"YY":return String(this.getFullYear()).slice(-2);case"YYYY":return String(this.getFullYear());case"M":return String(this.getMonth()+1);case"MM":return`0${this.getMonth()+1}`.slice(-2);case"MMM":return u.shortMonths(t)[this.getMonth()];case"MMMM":return u.longMonths(t)[this.getMonth()];case"D":return String(this.getDate());case"DD":return`0${this.getDate()}`.slice(-2);case"H":return String(this.getHours());case"HH":return`0${this.getHours()}`.slice(-2);case"h":return String(this.getHours()%12||12);case"hh":return`0${this.getHours()%12||12}`.slice(-2);case"m":return String(this.getMinutes());case"mm":return`0${this.getMinutes()}`.slice(-2);case"s":return String(this.getSeconds());case"ss":return`0${this.getSeconds()}`.slice(-2);case"a":return this.getHours()<12||this.getHours()===24?"am":"pm";case"A":return this.getHours()<12||this.getHours()===24?"AM":"PM";default:return""}}},c=u;h(c,"regex",/(\\)?(Y{2,4}|M{1,4}|D{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|A|a)/g),h(c,"MONTH_JS",[0,1,2,3,4,5,6,7,8,9,10,11]);var v=class{constructor(i){h(this,"picker");this.picker=i}render(i,e){i||(i=new c),i.setDate(1),i.setHours(0,0,0,0),typeof this[`get${e}View`]=="function"&&this[`get${e}View`](i)}getContainerView(i){this.picker.ui.container.innerHTML="",this.picker.options.header&&this.picker.trigger("render",{date:i.clone(),view:"Header"}),this.picker.trigger("render",{date:i.clone(),view:"Main"}),this.picker.options.autoApply||this.picker.trigger("render",{date:i.clone(),view:"Footer"})}getHeaderView(i){let e=document.createElement("header");this.picker.options.header instanceof HTMLElement&&e.appendChild(this.picker.options.header),typeof this.picker.options.header=="string"&&(e.innerHTML=this.picker.options.header),this.picker.ui.container.appendChild(e),this.picker.trigger("view",{target:e,date:i.clone(),view:"Header"})}getMainView(i){let e=document.createElement("main");this.picker.ui.container.appendChild(e);let t=document.createElement("div");t.className=`calendars grid-${this.picker.options.grid}`;for(let s=0;s<this.picker.options.calendars;s++){let n=document.createElement("div");n.className="calendar",t.appendChild(n);let a=this.getCalendarHeaderView(i.clone());n.appendChild(a),this.picker.trigger("view",{date:i.clone(),view:"CalendarHeader",index:s,target:a});let o=this.getCalendarDayNamesView();n.appendChild(o),this.picker.trigger("view",{date:i.clone(),view:"CalendarDayNames",index:s,target:o});let r=this.getCalendarDaysView(i.clone());n.appendChild(r),this.picker.trigger("view",{date:i.clone(),view:"CalendarDays",index:s,target:r});let l=this.getCalendarFooterView(this.picker.options.lang,i.clone());n.appendChild(l),this.picker.trigger("view",{date:i.clone(),view:"CalendarFooter",index:s,target:l}),this.picker.trigger("view",{date:i.clone(),view:"CalendarItem",index:s,target:n}),i.add(1,"month")}e.appendChild(t),this.picker.trigger("view",{date:i.clone(),view:"Calendars",target:t}),this.picker.trigger("view",{date:i.clone(),view:"Main",target:e})}getFooterView(i){let e=document.createElement("footer"),t=document.createElement("div");t.className="footer-buttons";let s=document.createElement("button");s.className="cancel-button unit",s.innerHTML=this.picker.options.locale.cancel,t.appendChild(s);let n=document.createElement("button");n.className="apply-button unit",n.innerHTML=this.picker.options.locale.apply,n.disabled=!0,t.appendChild(n),e.appendChild(t),this.picker.ui.container.appendChild(e),this.picker.trigger("view",{date:i,target:e,view:"Footer"})}getCalendarHeaderView(i){let e=document.createElement("div");e.className="header";let t=document.createElement("div");t.className="month-name",t.innerHTML=`<span>${i.toLocaleString(this.picker.options.lang,{month:"long"})}</span> ${i.format("YYYY")}`,e.appendChild(t);let s=document.createElement("button");s.className="previous-button unit",s.innerHTML=this.picker.options.locale.previousMonth,e.appendChild(s);let n=document.createElement("button");return n.className="next-button unit",n.innerHTML=this.picker.options.locale.nextMonth,e.appendChild(n),e}getCalendarDayNamesView(){let i=document.createElement("div");i.className="daynames-row";for(let e=1;e<=7;e++){let t=3+this.picker.options.firstDay+e,s=document.createElement("div");s.className="dayname",s.innerHTML=new Date(1970,0,t,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"short"}),s.title=new Date(1970,0,t,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"long"}),i.appendChild(s),this.picker.trigger("view",{dayIdx:t,view:"CalendarDayName",target:s})}return i}getCalendarDaysView(i){let e=document.createElement("div");e.className="days-grid";let t=this.calcOffsetDays(i,this.picker.options.firstDay),s=32-new Date(i.getFullYear(),i.getMonth(),32).getDate();for(let n=0;n<t;n++){let a=document.createElement("div");a.className="offset",e.appendChild(a)}for(let n=1;n<=s;n++){i.setDate(n);let a=this.getCalendarDayView(i);e.appendChild(a),this.picker.trigger("view",{date:i,view:"CalendarDay",target:a})}return e}getCalendarDayView(i){let e=this.picker.options.date?new c(this.picker.options.date):null,t=new c,s=document.createElement("div");return s.className="day unit",s.innerHTML=i.format("D"),s.dataset.time=String(i.getTime()),i.isSame(t,"day")&&s.classList.add("today"),[0,6].includes(i.getDay())&&s.classList.add("weekend"),this.picker.datePicked.length?this.picker.datePicked[0].isSame(i,"day")&&s.classList.add("selected"):e&&i.isSame(e,"day")&&s.classList.add("selected"),this.picker.trigger("view",{date:i,view:"CalendarDay",target:s}),s}getCalendarFooterView(i,e){let t=document.createElement("div");return t.className="footer",t}calcOffsetDays(i,e){let t=i.getDay()-e;return t<0&&(t+=7),t}},M=class{constructor(i){h(this,"picker");h(this,"instances",{});this.picker=i}initialize(){let i=[];this.picker.options.plugins.forEach(e=>{typeof e=="function"?i.push(new e):typeof e=="string"&&typeof easepick!="undefined"&&Object.prototype.hasOwnProperty.call(easepick,e)?i.push(new easepick[e]):console.warn(`easepick: ${e} not found.`)}),i.sort((e,t)=>e.priority>t.priority?-1:e.priority<t.priority||e.dependencies.length>t.dependencies.length?1:e.dependencies.length<t.dependencies.length?-1:0),i.forEach(e=>{e.attach(this.picker),this.instances[e.getName()]=e})}getInstance(i){return this.instances[i]}addInstance(i){if(Object.prototype.hasOwnProperty.call(this.instances,i))console.warn(`easepick: ${i} already added.`);else{if(typeof easepick!="undefined"&&Object.prototype.hasOwnProperty.call(easepick,i)){let e=new easepick[i];return e.attach(this.picker),this.instances[e.getName()]=e,e}if(this.getPluginFn(i)!=="undefined"){let e=new(this.getPluginFn(i));return e.attach(this.picker),this.instances[e.getName()]=e,e}console.warn(`easepick: ${i} not found.`)}return null}removeInstance(i){return i in this.instances&&this.instances[i].detach(),delete this.instances[i]}reloadInstance(i){return this.removeInstance(i),this.addInstance(i)}getPluginFn(i){return[...this.picker.options.plugins].filter(e=>typeof e=="function"&&new e().getName()===i).shift()}},y=class{constructor(i){h(this,"Calendar",new v(this));h(this,"PluginManager",new M(this));h(this,"calendars",[]);h(this,"datePicked",[]);h(this,"cssLoaded",0);h(this,"binds",{hidePicker:this.hidePicker.bind(this),show:this.show.bind(this)});h(this,"options",{doc:document,css:[],element:null,firstDay:1,grid:1,calendars:1,lang:"en-US",date:null,format:"YYYY-MM-DD",readonly:!0,autoApply:!0,header:!1,inline:!1,scrollToDate:!0,locale:{nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',cancel:"Cancel",apply:"Apply"},documentClick:this.binds.hidePicker,plugins:[]});h(this,"ui",{container:null,shadowRoot:null,wrapper:null});h(this,"version","1.2.1");let e={...this.options.locale,...i.locale};this.options={...this.options,...i},this.options.locale=e,this.handleOptions(),this.ui.wrapper=document.createElement("span"),this.ui.wrapper.style.display="none",this.ui.wrapper.style.position="absolute",this.ui.wrapper.style.pointerEvents="none",this.ui.wrapper.className="easepick-wrapper",this.ui.wrapper.attachShadow({mode:"open"}),this.ui.shadowRoot=this.ui.wrapper.shadowRoot,this.ui.container=document.createElement("div"),this.ui.container.className="container",this.options.zIndex&&(this.ui.container.style.zIndex=String(this.options.zIndex)),this.options.inline&&(this.ui.wrapper.style.position="relative",this.ui.container.classList.add("inline")),this.ui.shadowRoot.appendChild(this.ui.container),this.options.element.after(this.ui.wrapper),this.handleCSS(),this.options.element.addEventListener("click",this.binds.show),this.on("view",this.onView.bind(this)),this.on("render",this.onRender.bind(this)),this.PluginManager.initialize(),this.parseValues(),typeof this.options.setup=="function"&&this.options.setup(this),this.on("click",this.onClick.bind(this));let t=this.options.scrollToDate?this.getDate():null;this.renderAll(t)}on(i,e,t={}){this.ui.container.addEventListener(i,e,t)}off(i,e,t={}){this.ui.container.removeEventListener(i,e,t)}trigger(i,e={}){return this.ui.container.dispatchEvent(new CustomEvent(i,{detail:e}))}destroy(){this.options.element.removeEventListener("click",this.binds.show),typeof this.options.documentClick=="function"&&document.removeEventListener("click",this.options.documentClick,!0),Object.keys(this.PluginManager.instances).forEach(i=>{this.PluginManager.removeInstance(i)}),this.ui.wrapper.remove()}onRender(i){let{view:e,date:t}=i.detail;this.Calendar.render(t,e)}onView(i){let{view:e,target:t}=i.detail;e==="Footer"&&this.datePicked.length&&(t.querySelector(".apply-button").disabled=!1)}onClickHeaderButton(i){this.isCalendarHeaderButton(i)&&(i.classList.contains("next-button")?this.calendars[0].add(1,"month"):this.calendars[0].subtract(1,"month"),this.renderAll(this.calendars[0]))}onClickCalendarDay(i){if(this.isCalendarDay(i)){let e=new c(i.dataset.time);this.options.autoApply?(this.setDate(e),this.trigger("select",{date:this.getDate()}),this.hide()):(this.datePicked[0]=e,this.trigger("preselect",{date:this.getDate()}),this.renderAll())}}onClickApplyButton(i){if(this.isApplyButton(i)){if(this.datePicked[0]instanceof Date){let e=this.datePicked[0].clone();this.setDate(e)}this.hide(),this.trigger("select",{date:this.getDate()})}}onClickCancelButton(i){this.isCancelButton(i)&&this.hide()}onClick(i){let e=i.target;if(e instanceof HTMLElement){let t=e.closest(".unit");if(!(t instanceof HTMLElement))return;this.onClickHeaderButton(t),this.onClickCalendarDay(t),this.onClickApplyButton(t),this.onClickCancelButton(t)}}isShown(){return this.ui.container.classList.contains("inline")||this.ui.container.classList.contains("show")}show(i){if(this.isShown())return;let e=i&&"target"in i?i.target:this.options.element,{top:t,left:s}=this.adjustPosition(e);this.ui.container.style.top=`${t}px`,this.ui.container.style.left=`${s}px`,this.ui.container.classList.add("show"),this.trigger("show",{target:e})}hide(){this.ui.container.classList.remove("show"),this.datePicked.length=0,this.renderAll(),this.trigger("hide")}setDate(i){let e=new c(i,this.options.format);this.options.date=e.clone(),this.updateValues(),this.calendars.length&&this.renderAll()}getDate(){return this.options.date instanceof c?this.options.date.clone():null}parseValues(){this.options.date?this.setDate(this.options.date):this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.setDate(this.options.element.value),this.options.date instanceof Date||(this.options.date=null)}updateValues(){let i=this.getDate(),e=i instanceof Date?i.format(this.options.format,this.options.lang):"",t=this.options.element;t instanceof HTMLInputElement?t.value=e:t instanceof HTMLElement&&(t.innerText=e)}hidePicker(i){let e=i.target,t=null;e.shadowRoot&&(e=i.composedPath()[0],t=e.getRootNode().host),this.isShown()&&t!==this.ui.wrapper&&e!==this.options.element&&this.hide()}renderAll(i){this.trigger("render",{view:"Container",date:(i||this.calendars[0]).clone()})}isCalendarHeaderButton(i){return["previous-button","next-button"].some(e=>i.classList.contains(e))}isCalendarDay(i){return i.classList.contains("day")}isApplyButton(i){return i.classList.contains("apply-button")}isCancelButton(i){return i.classList.contains("cancel-button")}gotoDate(i){let e=new c(i,this.options.format);e.setDate(1),this.calendars[0]=e.clone(),this.renderAll()}clear(){this.options.date=null,this.datePicked.length=0,this.updateValues(),this.renderAll(),this.trigger("clear")}handleOptions(){this.options.element instanceof HTMLElement||(this.options.element=this.options.doc.querySelector(this.options.element)),typeof this.options.documentClick=="function"&&document.addEventListener("click",this.options.documentClick,!0),this.options.element instanceof HTMLInputElement&&(this.options.element.readOnly=this.options.readonly),this.options.date?this.calendars[0]=new c(this.options.date,this.options.format):this.calendars[0]=new c}handleCSS(){if(Array.isArray(this.options.css))this.options.css.forEach(i=>{let e=document.createElement("link");e.href=i,e.rel="stylesheet";let t=()=>{this.cssLoaded++,this.cssLoaded===this.options.css.length&&(this.ui.wrapper.style.display="")};e.addEventListener("load",t),e.addEventListener("error",t),this.ui.shadowRoot.append(e)});else if(typeof this.options.css=="string"){let i=document.createElement("style"),e=document.createTextNode(this.options.css);i.appendChild(e),this.ui.shadowRoot.append(i),this.ui.wrapper.style.display=""}else typeof this.options.css=="function"&&(this.options.css.call(this,this),this.ui.wrapper.style.display="")}adjustPosition(i){let e=i.getBoundingClientRect(),t=this.ui.wrapper.getBoundingClientRect();this.ui.container.classList.add("calc");let s=this.ui.container.getBoundingClientRect();this.ui.container.classList.remove("calc");let n=e.bottom-t.bottom,a=e.left-t.left;return typeof window!="undefined"&&(window.innerHeight<n+s.height&&n-s.height>=0&&(n=e.top-t.top-s.height),window.innerWidth<a+s.width&&e.right-s.width>=0&&(a=e.right-t.right-s.width)),{left:a,top:n}}},L=Object.freeze({__proto__:null,Core:y,create:y});var k=class{constructor(){h(this,"picker");h(this,"options");h(this,"priority",0);h(this,"dependencies",[])}attach(i){let e=this.getName(),t={...this.options};this.options={...this.options,...i.options[e]||{}};for(let n of Object.keys(t))if(t[n]!==null&&typeof t[n]=="object"&&Object.keys(t[n]).length&&e in i.options&&n in i.options[e]){let a={...i.options[e][n]};a!==null&&typeof a=="object"&&Object.keys(a).length&&Object.keys(a).every(o=>Object.keys(t[n]).includes(o))&&(this.options[n]={...t[n],...a})}if(this.picker=i,this.dependenciesNotFound()){let n=this.dependencies.filter(a=>!this.pluginsAsStringArray().includes(a));return void console.warn(`${this.getName()}: required dependencies (${n.join(", ")}).`)}let s=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.add(s),this.onAttach()}detach(){let i=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.remove(i),typeof this.onDetach=="function"&&this.onDetach()}dependenciesNotFound(){return this.dependencies.length&&!this.dependencies.every(i=>this.pluginsAsStringArray().includes(i))}pluginsAsStringArray(){return this.picker.options.plugins.map(i=>typeof i=="function"?new i().getName():i)}camelCaseToKebab(i){return i.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}};var w=class extends k{constructor(){super(...arguments);h(this,"priority",1);h(this,"binds",{onView:this.onView.bind(this)});h(this,"options",{minDate:null,maxDate:null,minDays:null,maxDays:null,selectForward:null,selectBackward:null,presets:!0,inseparable:!1,filter:null})}getName(){return"LockPlugin"}onAttach(){if(this.options.minDate&&(this.options.minDate=new c(this.options.minDate,this.picker.options.format,this.picker.options.lang)),this.options.maxDate&&(this.options.maxDate=new c(this.options.maxDate,this.picker.options.format,this.picker.options.lang),this.options.maxDate instanceof c&&this.picker.options.calendars>1&&this.picker.calendars[0].isSame(this.options.maxDate,"month"))){let e=this.picker.calendars[0].clone().subtract(1,"month");this.picker.gotoDate(e)}if((this.options.minDays||this.options.maxDays||this.options.selectForward||this.options.selectBackward)&&!this.picker.options.plugins.includes("RangePlugin")){let e=["minDays","maxDays","selectForward","selectBackward"];console.warn(`${this.getName()}: options ${e.join(", ")} required RangePlugin.`)}this.picker.on("view",this.binds.onView)}onDetach(){this.picker.off("view",this.binds.onView)}onView(e){let{view:t,target:s,date:n}=e.detail;if(t==="CalendarHeader"&&(this.options.minDate instanceof c&&n.isSameOrBefore(this.options.minDate,"month")&&s.classList.add("no-previous-month"),this.options.maxDate instanceof c&&n.isSameOrAfter(this.options.maxDate,"month")&&s.classList.add("no-next-month")),t==="CalendarDay"){let a=this.picker.datePicked.length?this.picker.datePicked[0]:null;if(this.testFilter(n))return void s.classList.add("locked");if(this.options.inseparable){if(this.options.minDays){let o=n.clone().subtract(this.options.minDays-1,"day"),r=n.clone().add(this.options.minDays-1,"day"),l=!1,p=!1;for(;o.isBefore(n,"day");){if(this.testFilter(o)){l=!0;break}o.add(1,"day")}for(;r.isAfter(n,"day");){if(this.testFilter(r)){p=!0;break}r.subtract(1,"day")}l&&p&&s.classList.add("not-available")}this.rangeIsNotAvailable(n,a)&&s.classList.add("not-available")}this.dateIsNotAvailable(n,a)&&s.classList.add("not-available")}if(this.options.presets&&t==="PresetPluginButton"){let a=new c(Number(s.dataset.start)),o=new c(Number(s.dataset.end)),r=o.diff(a,"day"),l=this.options.minDays&&r<this.options.minDays,p=this.options.maxDays&&r>this.options.maxDays;(l||p||this.lockMinDate(a)||this.lockMaxDate(a)||this.lockMinDate(o)||this.lockMaxDate(o)||this.rangeIsNotAvailable(a,o))&&s.setAttribute("disabled","disabled")}}dateIsNotAvailable(e,t){return this.lockMinDate(e)||this.lockMaxDate(e)||this.lockMinDays(e,t)||this.lockMaxDays(e,t)||this.lockSelectForward(e)||this.lockSelectBackward(e)}rangeIsNotAvailable(e,t){if(!e||!t)return!1;let s=(e.isSameOrBefore(t,"day")?e:t).clone(),n=(t.isSameOrAfter(e,"day")?t:e).clone();for(;s.isSameOrBefore(n,"day");){if(this.testFilter(s))return!0;s.add(1,"day")}return!1}lockMinDate(e){return this.options.minDate instanceof c&&e.isBefore(this.options.minDate,"day")}lockMaxDate(e){return this.options.maxDate instanceof c&&e.isAfter(this.options.maxDate,"day")}lockMinDays(e,t){if(this.options.minDays&&t){let s=t.clone().subtract(this.options.minDays-1,"day"),n=t.clone().add(this.options.minDays-1,"day");return e.isBetween(s,n)}return!1}lockMaxDays(e,t){if(this.options.maxDays&&t){let s=t.clone().subtract(this.options.maxDays,"day"),n=t.clone().add(this.options.maxDays,"day");return!e.isBetween(s,n)}return!1}lockSelectForward(e){if(this.picker.datePicked.length===1&&this.options.selectForward){let t=this.picker.datePicked[0].clone();return e.isBefore(t,"day")}return!1}lockSelectBackward(e){if(this.picker.datePicked.length===1&&this.options.selectBackward){let t=this.picker.datePicked[0].clone();return e.isAfter(t,"day")}return!1}testFilter(e){return typeof this.options.filter=="function"&&this.options.filter(e,this.picker.datePicked)}};var E=class extends k{constructor(){super(...arguments);h(this,"tooltipElement");h(this,"triggerElement");h(this,"binds",{setStartDate:this.setStartDate.bind(this),setEndDate:this.setEndDate.bind(this),setDateRange:this.setDateRange.bind(this),getStartDate:this.getStartDate.bind(this),getEndDate:this.getEndDate.bind(this),onView:this.onView.bind(this),onShow:this.onShow.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onClickCalendarDay:this.onClickCalendarDay.bind(this),onClickApplyButton:this.onClickApplyButton.bind(this),parseValues:this.parseValues.bind(this),updateValues:this.updateValues.bind(this),clear:this.clear.bind(this)});h(this,"options",{elementEnd:null,startDate:null,endDate:null,repick:!1,strict:!0,delimiter:" - ",tooltip:!0,tooltipNumber:e=>e,locale:{zero:"",one:"day",two:"",few:"",many:"",other:"days"},documentClick:this.hidePicker.bind(this)})}getName(){return"RangePlugin"}onAttach(){this.binds._setStartDate=this.picker.setStartDate,this.binds._setEndDate=this.picker.setEndDate,this.binds._setDateRange=this.picker.setDateRange,this.binds._getStartDate=this.picker.getStartDate,this.binds._getEndDate=this.picker.getEndDate,this.binds._parseValues=this.picker.parseValues,this.binds._updateValues=this.picker.updateValues,this.binds._clear=this.picker.clear,this.binds._onClickCalendarDay=this.picker.onClickCalendarDay,this.binds._onClickApplyButton=this.picker.onClickApplyButton,Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds.setStartDate},setEndDate:{configurable:!0,value:this.binds.setEndDate},setDateRange:{configurable:!0,value:this.binds.setDateRange},getStartDate:{configurable:!0,value:this.binds.getStartDate},getEndDate:{configurable:!0,value:this.binds.getEndDate},parseValues:{configurable:!0,value:this.binds.parseValues},updateValues:{configurable:!0,value:this.binds.updateValues},clear:{configurable:!0,value:this.binds.clear},onClickCalendarDay:{configurable:!0,value:this.binds.onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds.onClickApplyButton}}),this.options.elementEnd&&(this.options.elementEnd instanceof HTMLElement||(this.options.elementEnd=this.picker.options.doc.querySelector(this.options.elementEnd)),this.options.elementEnd instanceof HTMLInputElement&&(this.options.elementEnd.readOnly=this.picker.options.readonly),typeof this.picker.options.documentClick=="function"&&(document.removeEventListener("click",this.picker.options.documentClick,!0),typeof this.options.documentClick=="function"&&document.addEventListener("click",this.options.documentClick,!0)),this.options.elementEnd.addEventListener("click",this.picker.show.bind(this.picker))),this.options.repick=this.options.repick&&this.options.elementEnd instanceof HTMLElement,this.picker.options.date=null,this.picker.on("view",this.binds.onView),this.picker.on("show",this.binds.onShow),this.picker.on("mouseenter",this.binds.onMouseEnter,!0),this.picker.on("mouseleave",this.binds.onMouseLeave,!0),this.checkIntlPluralLocales()}onDetach(){Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds._setStartDate},setEndDate:{configurable:!0,value:this.binds._setEndDate},setDateRange:{configurable:!0,value:this.binds._setDateRange},getStartDate:{configurable:!0,value:this.binds._getStartDate},getEndDate:{configurable:!0,value:this.binds._getEndDate},parseValues:{configurable:!0,value:this.binds._parseValues},updateValues:{configurable:!0,value:this.binds._updateValues},clear:{configurable:!0,value:this.binds._clear},onClickCalendarDay:{configurable:!0,value:this.binds._onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds._onClickApplyButton}}),this.picker.off("view",this.binds.onView),this.picker.off("show",this.binds.onShow),this.picker.off("mouseenter",this.binds.onMouseEnter,!0),this.picker.off("mouseleave",this.binds.onMouseLeave,!0)}parseValues(){if(this.options.startDate||this.options.endDate)this.options.strict?this.options.startDate&&this.options.endDate?this.setDateRange(this.options.startDate,this.options.endDate):(this.options.startDate=null,this.options.endDate=null):(this.options.startDate&&this.setStartDate(this.options.startDate),this.options.endDate&&this.setEndDate(this.options.endDate));else if(this.options.elementEnd)this.options.strict?this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setDateRange(this.picker.options.element.value,this.options.elementEnd.value):(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.setStartDate(this.picker.options.element.value),this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setEndDate(this.options.elementEnd.value));else if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){let[e,t]=this.picker.options.element.value.split(this.options.delimiter);this.options.strict?e&&t&&this.setDateRange(e,t):(e&&this.setStartDate(e),t&&this.setEndDate(t))}}updateValues(){let e=this.picker.options.element,t=this.options.elementEnd,s=this.picker.getStartDate(),n=this.picker.getEndDate(),a=s instanceof Date?s.format(this.picker.options.format,this.picker.options.lang):"",o=n instanceof Date?n.format(this.picker.options.format,this.picker.options.lang):"";if(t)e instanceof HTMLInputElement?e.value=a:e instanceof HTMLElement&&(e.innerText=a),t instanceof HTMLInputElement?t.value=o:t instanceof HTMLElement&&(t.innerText=o);else{let r=`${a}${a||o?this.options.delimiter:""}${o}`;e instanceof HTMLInputElement?e.value=r:e instanceof HTMLElement&&(e.innerText=r)}}clear(){this.options.startDate=null,this.options.endDate=null,this.picker.datePicked.length=0,this.updateValues(),this.picker.renderAll(),this.picker.trigger("clear")}onShow(e){let{target:t}=e.detail;this.triggerElement=t,this.picker.options.scrollToDate&&this.getStartDate()instanceof Date&&this.picker.gotoDate(this.getStartDate()),this.initializeRepick()}onView(e){let{view:t,target:s}=e.detail;if(t==="Main"&&(this.tooltipElement=document.createElement("span"),this.tooltipElement.className="range-plugin-tooltip",s.appendChild(this.tooltipElement)),t==="CalendarDay"){let n=new c(s.dataset.time),a=this.picker.datePicked,o=a.length?this.picker.datePicked[0]:this.getStartDate(),r=a.length?this.picker.datePicked[1]:this.getEndDate();o&&o.isSame(n,"day")&&s.classList.add("start"),o&&r&&(r.isSame(n,"day")&&s.classList.add("end"),n.isBetween(o,r)&&s.classList.add("in-range"))}if(t==="Footer"){let n=this.picker.datePicked.length===1&&!this.options.strict||this.picker.datePicked.length===2;s.querySelector(".apply-button").disabled=!n}}hidePicker(e){let t=e.target,s=null;t.shadowRoot&&(t=e.composedPath()[0],s=t.getRootNode().host),this.picker.isShown()&&s!==this.picker.ui.wrapper&&t!==this.picker.options.element&&t!==this.options.elementEnd&&this.picker.hide()}setStartDate(e){let t=new c(e,this.picker.options.format);this.options.startDate=t?t.clone():null,this.updateValues(),this.picker.renderAll()}setEndDate(e){let t=new c(e,this.picker.options.format);this.options.endDate=t?t.clone():null,this.updateValues(),this.picker.renderAll()}setDateRange(e,t){let s=new c(e,this.picker.options.format),n=new c(t,this.picker.options.format);this.options.startDate=s?s.clone():null,this.options.endDate=n?n.clone():null,this.updateValues(),this.picker.renderAll()}getStartDate(){return this.options.startDate instanceof Date?this.options.startDate.clone():null}getEndDate(){return this.options.endDate instanceof Date?this.options.endDate.clone():null}onMouseEnter(e){let t=e.target;if(t instanceof HTMLElement){this.isContainer(t)&&this.initializeRepick();let s=t.closest(".unit");if(!(s instanceof HTMLElement))return;if(this.picker.isCalendarDay(s)){if(this.picker.datePicked.length!==1)return;let n=this.picker.datePicked[0].clone(),a=new c(s.dataset.time),o=!1;if(n.isAfter(a,"day")){let r=n.clone();n=a.clone(),a=r.clone(),o=!0}if([...this.picker.ui.container.querySelectorAll(".day")].forEach(r=>{let l=new c(r.dataset.time),p=this.picker.Calendar.getCalendarDayView(l);l.isBetween(n,a)&&p.classList.add("in-range"),l.isSame(this.picker.datePicked[0],"day")&&(p.classList.add("start"),p.classList.toggle("flipped",o)),r===s&&(p.classList.add("end"),p.classList.toggle("flipped",o)),r.className=p.className}),this.options.tooltip){let r=this.options.tooltipNumber(a.diff(n,"day")+1);if(r>0){let l=new Intl.PluralRules(this.picker.options.lang).select(r),p=`${r} ${this.options.locale[l]}`;this.showTooltip(s,p)}else this.hideTooltip()}}}}onMouseLeave(e){if(this.isContainer(e.target)&&this.options.repick){let t=this.getStartDate(),s=this.getEndDate();t&&s&&(this.picker.datePicked.length=0,this.picker.renderAll())}}onClickCalendarDay(e){if(this.picker.isCalendarDay(e)){this.picker.datePicked.length===2&&(this.picker.datePicked.length=0);let t=new c(e.dataset.time);if(this.picker.datePicked[this.picker.datePicked.length]=t,this.picker.datePicked.length===2&&this.picker.datePicked[0].isAfter(this.picker.datePicked[1])){let s=this.picker.datePicked[1].clone();this.picker.datePicked[1]=this.picker.datePicked[0].clone(),this.picker.datePicked[0]=s.clone()}this.picker.datePicked.length!==1&&this.picker.options.autoApply||this.picker.trigger("preselect",{start:this.picker.datePicked[0]instanceof Date?this.picker.datePicked[0].clone():null,end:this.picker.datePicked[1]instanceof Date?this.picker.datePicked[1].clone():null}),this.picker.datePicked.length===1&&(!this.options.strict&&this.picker.options.autoApply&&(this.picker.options.element===this.triggerElement&&this.setStartDate(this.picker.datePicked[0]),this.options.elementEnd===this.triggerElement&&this.setEndDate(this.picker.datePicked[0]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()})),this.picker.renderAll()),this.picker.datePicked.length===2&&(this.picker.options.autoApply?(this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.hideTooltip(),this.picker.renderAll()))}}onClickApplyButton(e){this.picker.isApplyButton(e)&&(this.picker.datePicked.length!==1||this.options.strict||(this.picker.options.element===this.triggerElement&&(this.options.endDate=null,this.setStartDate(this.picker.datePicked[0])),this.options.elementEnd===this.triggerElement&&(this.options.startDate=null,this.setEndDate(this.picker.datePicked[0]))),this.picker.datePicked.length===2&&this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide())}showTooltip(e,t){this.tooltipElement.style.visibility="visible",this.tooltipElement.innerHTML=t;let s=this.picker.ui.container.getBoundingClientRect(),n=this.tooltipElement.getBoundingClientRect(),a=e.getBoundingClientRect(),o=a.top,r=a.left;o-=s.top,r-=s.left,o-=n.height,r-=n.width/2,r+=a.width/2,this.tooltipElement.style.top=`${o}px`,this.tooltipElement.style.left=`${r}px`}hideTooltip(){this.tooltipElement.style.visibility="hidden"}checkIntlPluralLocales(){if(!this.options.tooltip)return;let e=[...new Set([new Intl.PluralRules(this.picker.options.lang).select(0),new Intl.PluralRules(this.picker.options.lang).select(1),new Intl.PluralRules(this.picker.options.lang).select(2),new Intl.PluralRules(this.picker.options.lang).select(6),new Intl.PluralRules(this.picker.options.lang).select(18)])],t=Object.keys(this.options.locale);e.every(s=>t.includes(s))||console.warn(`${this.getName()}: provide locales (${e.join(", ")}) for correct tooltip text.`)}initializeRepick(){if(!this.options.repick)return;let e=this.getStartDate(),t=this.getEndDate();t&&this.triggerElement===this.picker.options.element&&(this.picker.datePicked[0]=t),e&&this.triggerElement===this.options.elementEnd&&(this.picker.datePicked[0]=e)}isContainer(e){return e===this.picker.ui.container}};function A(d){return new URLSearchParams(window.location.search).get(d)||""}function S(d,i,e=!1){let t=new URL(window.location.href);i?t.searchParams.set(d,i):t.searchParams.delete(d),e?window.history.pushState({},"",t.href):window.history.replaceState({},"",t.href)}var g="filters";window.addEventListener("alpine:init",()=>{window.Alpine.data("filterEventsForm",function(){let d="test",i,e="https://cdn.jsdelivr.net/npm/@easepick/core@1.2.1/dist/index.css",t="https://cdn.jsdelivr.net/npm/@easepick/range-plugin@1.2.1/dist/index.css",s="https://cdn.jsdelivr.net/npm/@easepick/lock-plugin@1.2.1/dist/index.css";return{init(){this.initializeDatePickers(),this.processTestQueryParam(),this.updateStore()},initializeDatePickers(){let n=this.$refs.dateRangePicker;n&&(i=new L.create({element:n,css:[e,t,s],calendars:2,format:"MMM DD YYYY",grid:2,plugins:[E,w],zIndex:10,RangePlugin:{tooltip:!1},LockPlugin:{minDate:new Date},setup:a=>{a.on("select",()=>{this.updateDateRange(a.getStartDate(),a.getEndDate())}),a.on("clear",()=>{this.updateDateRange(void 0,void 0)})}}))},async updateStore(){await this.$nextTick();let n=this.getTestName(),a=this.getTestTopics();S(d,n),this.$store[g].testName=n,this.$store[g].testTopics=a,this.$store[g].test_date=this.getSelectedTestDate(),this.$store[g].is_online=this.getLocation(),this.$store[g].extended_time_available=this.getETCheckboxValue(),this.$store[g].days_of_week=this.getCheckedWeekdays()},processTestQueryParam(){let n=A(d),a=this.getTestRadioGroupEl();if(n!==""){let o=a==null?void 0:a.querySelector(`input[data-name="${n}"]`);if(o){o.click();let r=new Event("change",{bubbles:!0});o.dispatchEvent(r)}else console.warn(`Test radio button with the value "${n}" not found in the form`)}},getTestName(){var r;let n="",a=this.getTestRadioGroupEl();return((r=a==null?void 0:a.querySelector('input[name="test"]:checked'))==null?void 0:r.dataset.name)||n},getTestTopics(){let n,a=this.getTestRadioGroupEl(),o=a==null?void 0:a.querySelector('input[name="test"]:checked'),r=o==null?void 0:o.dataset.topics;if(!r){console.warn("No test topics selected",o);return}try{n=JSON.parse(`[${r}]`)}catch(l){console.warn("Failed to parse the filter test topics. Please check the proper format of topic IDs entry in the CMS Collection",l,o==null?void 0:o.dataset.name,{selectedTestTopics:r})}return n},getLocation(){var o,r;let n="";return((r=(o=this.$refs.locationRadioGroup)==null?void 0:o.querySelector('input[name="location"]:checked'))==null?void 0:r.value)||n},getCheckedWeekdays(){let n=new Set,a=this.$refs.weekdayCheckboxGroup.querySelectorAll('input[name="weekday_group[]"]:checked');if(a.forEach(o=>{n.add(o.value)}),!!a.length)return[...n]},getETCheckboxValue(){return this.$refs.etCheckbox&&this.$refs.etCheckbox.checked||void 0},getSelectedTestDate(){let n=this.$refs.testDateSelect;if(!n)return;let a=n.value;if(a!=="")return dayjs(`${a} 00:00:00 UTC`).utc().format()||void 0},updateDateRange(n,a){this.$store[g].start_date=n,this.$store[g].end_date=a},clearDateRange(){i.clear()},async clearTestDate(){if(!this.$refs.testDateSelect)return;let n=this.$refs.testDateSelect;n.selectedIndex=0,await this.$nextTick,this.updateStore()},clearTest(){S(d,null),window.location.reload()},clearWeekdays(){this.$refs.weekdayCheckboxGroup.querySelectorAll('input[name="weekday_group[]"]:checked').forEach(a=>{a.click()})},getTestRadioGroupEl(){return this.$refs.testsRadioGroup}}})});})();
