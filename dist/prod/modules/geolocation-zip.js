"use strict";(()=>{var l=Object.defineProperty;var E=(o,e,t)=>e in o?l(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var n=(o,e,t)=>(E(o,typeof e!="symbol"?e+"":e,t),t);var r=class{constructor(){n(this,"API_BASE","https://applerouth.onecanoe.com/api/public/v2");n(this,"API_ENDPOINT")}async sendQuery(){let e=await fetch(this.API_BASE+this.API_ENDPOINT,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.API_BODY)});return e.ok?await e.json():(console.warn(`Error when sending query: ${this.API_BASE}${this.API_ENDPOINT}`),console.warn(e,e.statusText),null)}},c=r;var I="Other",_="OTH",y=4,a=class extends c{constructor(t){super();n(this,"API_ENDPOINT","/geolocation");n(this,"API_BODY");t?this.API_BODY=t:this.API_BODY={type:"ip"}}emptyResponse(){return{market:I,market_nickname:_,market_id:y,city_name:null,state_name:null}}},m=a;var s="geolocation";function A(o){window.Alpine.store(s).geo_source=o}function u(o,e,t,p,i){window.Alpine.store(s).market=o,window.Alpine.store(s).market_nickname=e,window.Alpine.store(s).market_id=t,window.Alpine.store(s).city_name=p,window.Alpine.store(s).state_name=i,window.Alpine.store(s).location_name=P(o,p,i)}function P(o,e,t){return e==="-"||e===null?o:t!==""&&t!==null?`${e}, ${t}`:e}document.addEventListener("alpine:init",()=>{window.Alpine.data("geolocationZIP",function(){return{zipInput:"",isLoading:!1,isError:!1,locationName(){return this.$store[s].location_name},async processQuery(){let o={type:"zip",zipcode:Number(this.zipInput)};this.isLoading=!0;let e=await new m(o).sendQuery();if(this.isLoading=!1,!e||!e.market_id){this.isError=!0,this.$refs.zipErrorIXTrigger.click(),setTimeout(()=>{this.isError=!1,this.zipInput="",this.$refs.zipInputField.focus()},1e3),console.warn("Geolocation query failed",{responseData:e});return}A("zip"),u(e.market,e.market_nickname,e.market_id,e.city_name,e.state_name),this.zipInput="",this.$refs.modalClose.click()}}})});})();
