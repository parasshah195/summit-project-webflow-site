"use strict";(()=>{var I=Object.defineProperty;var P=(t,e,s)=>e in t?I(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var n=(t,e,s)=>(P(t,typeof e!="symbol"?e+"":e,s),s);var r=class{constructor(){n(this,"API_BASE","https://applerouth.onecanoe.com/api/public/v2");n(this,"API_ENDPOINT")}async sendQuery(){let e;try{e=await fetch(this.API_BASE+this.API_ENDPOINT,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.API_BODY)})}catch(o){return console.error(`Error when sending query: ${this.API_BASE}${this.API_ENDPOINT}`,o),null}return e.ok?await e.json():(console.warn(`Error when sending query: ${this.API_BASE}${this.API_ENDPOINT}`),console.warn(e,e.statusText),null)}},i=r;var a=class extends i{constructor(s){super();n(this,"API_ENDPOINT","/events");n(this,"API_BODY");n(this,"DEFAULT_EVENT_LIMIT",12);this.API_BODY=s,this.setAPIDefaults()}setAPIDefaults(){this.API_BODY.limit||(this.API_BODY.limit=this.DEFAULT_EVENT_LIMIT),this.API_BODY.start||(this.API_BODY.start=0)}async getQueryData(){let s=await this.sendQuery();if(!s)return null;let{data:o}=s;return!o||!o.length?(console.warn(`Empty response from the query: ${this.API_BASE}${this.API_ENDPOINT}`),this.emptyResponse()):o}emptyResponse(){return[]}},p=a;window.addEventListener("alpine:init",()=>{window.Alpine.data("eventCodeFind",function(){return{isError:!1,isLoading:!1,eventCode:"",async processQuery(){let t={category:["all"],event_code:this.eventCode};this.isLoading=!0;let e=await new p(t).getQueryData();if(!e.length){this.isLoading=!1,this.isError=!0,this.$refs.eventCodeErrorIXTrigger.click(),setTimeout(()=>{this.isError=!1,this.eventCode="",this.$refs.eventCodeInput.focus()},1e3);return}window.location.href=e[0].event_page_url}}})});})();
