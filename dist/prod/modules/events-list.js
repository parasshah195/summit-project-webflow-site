"use strict";(()=>{var E=Object.defineProperty;var I=(t,n,r)=>n in t?E(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r;var p=(t,n,r)=>(I(t,typeof n!="symbol"?n+"":n,r),r);var d=class{constructor(){p(this,"API_BASE","https://applerouth.onecanoe.com/api/public/v2");p(this,"API_ENDPOINT")}async sendQuery(){let n;try{n=await fetch(this.API_BASE+this.API_ENDPOINT,{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(this.API_BODY)})}catch(e){return console.error(`Error when sending query: ${this.API_BASE}${this.API_ENDPOINT}`,e),null}return n.ok?await n.json():(console.warn(`Error when sending query: ${this.API_BASE}${this.API_ENDPOINT}`),console.warn(n,n.statusText),null)}},c=d;var m=class extends c{constructor(r){super();p(this,"API_ENDPOINT","/events");p(this,"API_BODY");p(this,"DEFAULT_EVENT_LIMIT",12);this.API_BODY=r,this.setAPIDefaults()}setAPIDefaults(){this.API_BODY.limit||(this.API_BODY.limit=this.DEFAULT_EVENT_LIMIT),this.API_BODY.start||(this.API_BODY.start=0)}async getQueryData(){let r=await this.sendQuery();if(!r)return null;let{data:e}=r;return!e||!e.length?(console.warn(`Empty response from the query: ${this.API_BASE}${this.API_ENDPOINT}`),this.emptyResponse()):e}emptyResponse(){return[]}},f=m;function u(t){return!(t.type!=="class"||!t.class_schedule||1>=t.class_schedule.sessions_count)}function y(t){var n,r;return u(t)?dayjs((n=t.class_schedule)==null?void 0:n.first_session.starts_at).format("MMM Do")+" - "+dayjs((r=t.class_schedule)==null?void 0:r.final_session.starts_at).format("MMM Do")+" ("+t.days_of_week.join(", ")+")":dayjs(t.starts_at).format("MMM Do")+" ("+t.days_of_week.join(", ")+")"}function h(t,n,r=!0){let e="h:mm A",s=dayjs(t).format(e),a=dayjs(n).format(e),i=dayjs(t).format("z");return r?`${s} - ${a} (${i})`:`${s} - ${a}`}var A=()=>{var t;(t=window.Webflow)==null||t.require("slider").redraw(),window.dispatchEvent(new Event("resize"))};var _=["category","market","id","name","event_code","tags","limit","start","topics","before","after","timezone","test_date","is_online","extended_time_available","days_of_week","location_id"];function P(t,n){let r="query-",e=r.length;for(let s of t.attributes)if(s.name.startsWith(r)){let a=s.name.substring(e);_.includes(a)&&(n.apiBody[a]=D(s.value))}}function D(t){if(/^\d+$/.test(t))return Number(t);if(!isNaN(Date.parse(t)))return new Date(t);let n=t.toLowerCase();if(n==="true")return!0;if(n==="false")return!1;try{let r=/'([^']*)'/g,e=JSON.parse(t.replace(r,'"$1"'));return Array.isArray(e)?e:t}catch{return t}}window.addEventListener("alpine:init",()=>{let n="data-non-slider";window.Alpine.data("eventsList",function(){return{areEventsAvailable:!0,isLoading:!1,isQueryError:!1,moreEventsLoading:!1,eventsDepleted:!1,events:[],blogList:null,apiBody:{category:["marketing_event"],start:0,limit:12,name:void 0,tags:void 0,topics:void 0,before:void 0,after:void 0,is_online:void 0,extended_time_available:void 0,days_of_week:void 0,location_id:void 0},eventSlideAttr:{[":key"](){return this.event.id}},eventWebinarImage:{[":src"](){return!this.event.tags||!this.event.tags.length?null:this.event.image_src},[":alt"](){return!this.event.tags||!this.event.tags.length?null:this.event.image_alt},srcset:"",sizes:""},async init(){if(this.isLoading=!0,this.$refs.blogPostsList){let e=this.$refs.blogPostsList.querySelectorAll(":scope > div");this.blogList=e.length?e:null}await this.$nextTick(),this.setAPIParams(),this.processQuery()},setAPIParams(){this.$refs.componentEl||console.warn("`componentEl` reference not found on the main component element - eventSlider","Processing query with the default attributes of",this.apiBody),P(this.$refs.componentEl,this)},async processQuery(e=!1){var a,i;e||(this.isLoading=!0),this.areEventsAvailable=!0,this.isQueryError=!1;let s=await new f(this.apiBody).getQueryData();if(!s){this.isLoading=!1,this.isQueryError=!0,this.areEventsAvailable=!1;return}if(!s.length&&!this.blogList&&!e){this.isLoading=!1,this.areEventsAvailable=!1;return}(!s.length&&e||s.length<(this.apiBody.limit||12))&&(this.eventsDepleted=!0),s.forEach(o=>{o.tags&&o.tags.length&&this.setTagImage(o)}),s.length&&this.events.push(...s),this.$nextTick(()=>{this.$refs.sliderMask&&this.blogList&&this.appendBlogPostsAndShuffle()===null&&!s.length&&(this.areEventsAvailable=!1)}),this.isLoading=!1,await this.$nextTick(),(i=(a=this.$refs)==null?void 0:a.componentEl)!=null&&i.hasAttribute(n)||A()},async viewMoreEvents(){this.apiBody.start||(this.apiBody.start=0),this.apiBody.limit||(this.apiBody.limit=6),this.apiBody.start+=this.apiBody.limit,this.moreEventsLoading=!0,await this.processQuery(!0),this.moreEventsLoading=!1},getTimeRange(e,s,a=!0){return h(e,s,a)},getPresenters(e){let{presenters:s}=e;return!s||!s.length?"No presenters":s.join(", ")},appendBlogPostsAndShuffle(){if(!this.blogList)return console.warn("Trying to shuffle event slider cards when blogList is null","slider mask element -",this.$refs.sliderMask),null;let e=this.$refs.sliderMask.querySelectorAll(":scope > div");if(!e.length)return null;let s=[...e];e.forEach(l=>l.remove());let a=document.createDocumentFragment(),i=0,o=0;for(;i<s.length||o<this.blogList.length;)if(i<s.length&&(a.appendChild(s[i]),i+=1),o<this.blogList.length){let l=this.blogList[o];l.classList.add("w-slide"),a.appendChild(l),o+=1}return this.$refs.sliderMask.appendChild(a),!0},getEventDateRange(e){return y(e)},isMultiDayEvent(e){return u(e)},setTagImage(e){var g;let s=Math.random(),a=Math.floor(s*e.tags.length),i=(g=this.$refs.blogTagsList)==null?void 0:g.querySelectorAll(`img[tag_name="${e.tags[a]}"]`);if(!i||!i.length)return null;let o=Math.floor(s*i.length),l=i[o];e.image_src=l.getAttribute("src")||null,e.image_alt=l.getAttribute("alt")||""}}})});})();
